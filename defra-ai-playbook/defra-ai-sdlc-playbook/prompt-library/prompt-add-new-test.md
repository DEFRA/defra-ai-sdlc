```
Create new unit tests for [feature or file or code bock in file]. 

1. Follow the testing approach and conventions in [test file]
2. Note that if this is a plugin, then the tests need to be in the `tests` folder of the plugin itself, if not, then the tests should go in the `tests` folder of the root of the application.
3. Think through mocking strategy, follow the existing testing conventions in the code, and only add tests for the missing lines of coverage.
4. Provide complete implementation (no placeholders)
5. Make sure you understand the functionality being tested BEFORE writing the tests.  Think step by step and plan your changes.
6. Don't change the source file, only fix the test file issues
7. Run tests to confirm/verify the fix
8. Fix any warnings, if there are any
9. Run the full tests to see if you've addressed all the coverage for the given file
10. Only finish working once you've verified there is full coverage, the tests pass, and there are no warnings

**Important:** Provide the final test code as a single, complete snippet that satisfies all requirements on the first try. Do not provide multiple revisions or partial codeâ€”just the single final version. If you need to reason internally, do so silently.
```